<router-outlet></router-outlet>

<main>
  <div class="main-layout" [class.collapsed]="isSidebarCollapsed">
    <!-- El sidebar ahora está dentro del componente option-bar -->
    <app-option-bar 
      (optionSelected)="handleOption($event)" 
      (sidebarToggled)="toggleSidebar($event)"
      [class.collapsed]="isSidebarCollapsed">
    </app-option-bar>

    <!-- Área de contenido dinámico -->
    <div class="content-area" [class.extend]="isSidebarExtended" id="content-view">
      <div class="d-flex justify-content-between px-5 py-2">
        <img
          src="https://w7.pngwing.com/pngs/44/38/png-transparent-gold-colored-musical-note-illustration-musical-note-clef-music-notes-miscellaneous-metal-music-download-thumbnail.png"
          alt="Logo" width="80" height="80">
        <h1 class="text-white">Reproductor de multimedia</h1>
      </div>
      
      <app-audio-player *ngIf="currentView === 'player'"></app-audio-player>

      <app-select-file *ngIf="currentView === 'selectfile'"></app-select-file>

      <app-library *ngIf="currentView === 'library'"></app-library>

      <app-videos *ngIf="currentView === 'videos'"></app-videos>

      <app-favorites *ngIf="currentView === 'favorites'"></app-favorites>

    </div>
  </div>
</main>

<!-- Tarjeta del reproductor fija -->
<div class="card fixed-bottom bg-black text-white">
  <div class="row g-0">
    <div class="col-md-4">
      <div class="current-song">
        <img [src]="currentSong?.image" alt="Portada de {{ currentSong?.title }}" class="cover" />
      </div>
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <div>
            <h3>{{ currentSong?.title }}</h3>
            <h4>{{ currentSong?.artist }}</h4>
          </div>
          <div class="">
            <button class="btn btn-primary btn-sm me-4" (click)="previous()">
              <fa-icon [icon]="faStepBackward"></fa-icon>
            </button>
            <button class="btn btn-primary btn-sm me-4" (click)="playPause()">
              <fa-icon [icon]="isPlaying ? faPause : faPlay"></fa-icon>
            </button>
            <button class="btn btn-primary btn-sm me-4" (click)="next()">
              <fa-icon [icon]="faStepForward"></fa-icon>
            </button>
          </div>
  
          <div class="volume-control d-flex align-items-center">
            <fa-icon [icon]="faVolumeHigh"></fa-icon>
            <input class="ms-2" type="range" max="1" min="0" step="0.1" [value]="volume" (input)="setVolume($event)">
          </div>
        </div>

        <div class="progress-container">
          <span>{{ formatTime(currentTime) }}</span>
          <input type="range" class="progress-slider" max="100" min="0" step="0.1" [value]="progress" (input)="seek($event)">
          <span>{{ formatTime(duration) }}</span>
        </div>
      </div>
    </div>
  </div>
</div>