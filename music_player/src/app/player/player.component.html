

<div class="main">
  <div class="vertical-content">

    <mat-form-field appearance="outline" class="search-bar">
      <mat-label>Buscar canción</mat-label>
      <input #str matInput placeholder="Escribe el nombre de la canción" (input)="filterTracks(str.value)">
      <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>

    <div class="song-list">
      <h3>Lista de canciones</h3>
      <ul>
  <li *ngFor="let track of filteredTracks; let i = index" [class.active]="i === currentTrackIndex" (click)="selectTrack(i)">
          <strong>{{ track.title }}</strong> <span>- {{ track.artist }}</span> <span>({{ track.album }})</span>
        </li>
      </ul>
    </div>

<app-track-list
  [tracks]="tracks"
  [currentTrackIndex]="currentTrackIndex"
  (trackSelected)="selectTrack($event)">
</app-track-list>

    <div class="player">
      <div class="album-art">
        <img [src]="currentTrack.cover || 'assets/music/default-cover.png'" alt="Carátula" />
        <div class="playing-indicator">
          <span class="bar" *ngFor="let b of [1,2,3,4]"></span>
        </div>
      </div>
      <div class="track-info">
        <h2>{{currentTrack.title}}</h2>
        <div class="artist-name">{{currentTrack.artist}}</div>
        <div class="album-name">{{currentTrack.album}}</div>
      </div>
      <audio #audioPlayer (timeupdate)="updateProgress($event)" (ended)="nextTrack()">
        <track kind="captions" [src]="currentTrack.captions" srclang="es" label="Español">
        <source [src]="currentTrack.url" type="audio/mpeg">
      </audio>
      <div class="progress-container">
        <span>{{ currentTime | date:'mm:ss' }}</span>
        <input type="range" min="0" [max]="duration" [value]="currentTime" (input)="seekAudio($event)">
        <span>{{ duration | date:'mm:ss' }}</span>
      </div>

      <div class="player-controls">
        <button (click)="previous()" aria-label="Canción anterior">⏮️</button>
        <button (click)="togglePlay()" aria-label="Reproducir o pausar">{{ isPlaying ? '⏸️' : '▶️' }}</button>
        <button (click)="stop()" aria-label="Detener reproducción">⏹️</button>
        <button (click)="next()" aria-label="Siguiente canción">⏭️</button>
        <button (click)="toggleLoop()" aria-label="Activar o desactivar repetición">🔁</button>
        <button (click)="toggleShuffle()" aria-label="Activar o desactivar aleatorio">🔀</button>
      </div>
      <div class="volume-control">
        <label>Volumen</label>
        <input type="range" min="0" max="1" step="0.01" (input)="setVolume($event)">
      </div>
    </div>

    <div class="video-player">
      <h2>Video</h2>
      <video width="320" height="240" controls>
        <source src="assets/videos/video1.mp4" type="video/mp4">
      </video>
    </div>
  </div>
</div>

<style>


  .main {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    padding: 2rem;
    box-sizing: border-box;
    background: var(--gray-50, #f5f5f5);
  }

  .vertical-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2.5rem;
    width: 100%;
    max-width: 600px;
  }

  .search-bar {
    width: 100%;
    max-width: 400px;
    margin: 0 auto;
    display: flex;
    justify-content: center;
  }

  .player {
    width: 100%;
    max-width: 500px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    padding: 2rem 1.5rem;
    text-align: center;
  }

  .player-controls {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1rem;
    flex-wrap: wrap;
  }

  .volume-control {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 1rem;
  }

  .video-player {
    width: 100%;
    max-width: 400px;
    margin: 0 auto;
    text-align: center;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    padding: 1rem;
  }

  .video-player h2 {
    margin-bottom: 1rem;
    font-size: 1.2rem;
    color: var(--gray-900, #222);
    text-align: center;
  }

  .pill-group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .pill {
    padding: 0.5rem 1rem;
    background: var(--gray-200);
    border-radius: 9999px;
    text-decoration: none;
    color: var(--gray-900);
    font-weight: 500;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  .pill:hover {
    background: var(--red-to-pink-to-purple-horizontal-gradient);
    color: white;
  }

  .divider {
    width: 1px;
    background: var(--red-to-pink-to-purple-vertical-gradient);
    margin-left: 1rem;
  }

  .player-logo img {
    border-radius: 50%;
    border: 4px solid var(--gray-300);
  }

  .player-logo h1 {
    margin-top: 0.5rem;
    font-size: 1.5rem;
    color: var(--gray-900);
  }

  .player-logo p {
    color: var(--gray-600);
  }
</style>